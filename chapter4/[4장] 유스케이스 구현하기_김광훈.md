# 유스케이스 구현하기
## 1. 유스케이스 둘러보기
#### 1.1 Flow
<img width="800" src="https://user-images.githubusercontent.com/60383031/154530198-0f13f12a-6f67-4802-89c3-b24dfc43da15.png">

- (1) 입력을 받는다.
- (2) 비즈니스 규칙을 검증한다.
- (3) 모델 상태를 조작한다.
- (4) 출력을 반환한다.

#### 1.2 역할
- 유스케이스 코드는 도메인 로직에만 신경써야한다.
- 입력 유효성 검증은 책임에 벗어난다.
- 단, 비즈니스 규칙을 검증한 책임은 존재한다.

<br>

## 2. 입력 유효성 검증
<img width="800" src="https://user-images.githubusercontent.com/60383031/154531300-4c6e86d8-7948-4016-a0e7-ac1926ec1b00.png">

- 유스케이스 입력 모델의 생성자에서 입력 유효성을 검증하는 것이 좋다.
- 애플리케이션 계층에서 입력 유효성을 검증해야 한다.
- 그렇지 않으면 애플리케이션 코어 바깥쪽으로부터 유효하지 않은 입력 값을 받게 되어 모델의 상태를 해친다.

<br>

## 3. 생성자의 힘
- 빌더 패턴을 무조건 사용하는 것이 좋은 것인가 ??
- 저자는 빌더 패턴 없이 생성자를 호출하는 것이 좋다는 점을 어필하고 있다.
    - 컴파일의 도움을 받을 수 있음
    - IDE 에서 파라미터명 보여줌

<img width="800" src="https://user-images.githubusercontent.com/60383031/154532943-73a43ab1-9b52-4483-a9cb-50d61de1d551.png">

- 그렇다면 빌더패턴은 언제 사용하는 것이 좋을까 ??
    - 모든 필드를 다 받는다면 Builder 패턴의 이점은 없다고 생각한다.
    - 클래스 내에 전체 필드 개수 보다 적은 생성자가 있는 경우에만 Builder 패턴을 구현하는 것이 좋다고 생각한다.

<br>

## 4. 유스케이스마다 다른 입력 모델
- 결론부터 말하자면 독자는 유스케이스마다 모델을 분리하는 것을 권장한다.
- 예를들어 MoneyCommand 객체를 SendMoneyCommand / GetMoneyCommand 등으로 분리하라고 한다.
- 이렇게 사용하면 null 을 받을 필요 없고, 유스케이스를 훨씬 더 명확하게 만든다고 한다.

<br>

## 5. 비즈니스 규칙 검증하가
<img width="800" src="https://user-images.githubusercontent.com/60383031/154534232-b0423ef5-0929-4f36-85a6-f98c089e523c.png">

- 비즈니스 규칙은 유스케이스의 맥락 속에서 의미적인 유효성 검증하는 일
- 비즈니스 규칙은 도메인 엔티티에 안에 넣는 것이 좋다.

<br>

## 6. 풍부한 도메인 모델 vs 빈약한 도메인 모델
#### (1) 풍부한 도메인 모델
- 애플리케이션의 코어에 있는 Entity 에서 많은 도메인 로직이 구현
- 즉, 대부분의 비즈니스 규칙들은 Entity 에 위치하게 된다.
- 따라서 유스케이스에는 사용자의 의도만을 표현하게 된다.

#### (2) 빈약한 도메인 모델
- 일반적으로 getter / setter 정도만 표현한다.
- 즉, 유스케이스에 비즈니스 로직이 구현되게 된다.

<br>

## 7. 유스케이스마다 다른 모델 출력
- 입력과 비슷하게 출력도 각 유스케이스에 맞게 구체적일수록 좋다.
- 공유 모델은 장기적으로 보았을 때 점점 비대해지게 돼 있다.

<br>

## 8. 읽기 전용 유스케이스는 어떨까 ?
<img width="800" src="https://user-images.githubusercontent.com/60383031/154725979-89e3bd8a-7b7a-43ba-b2c6-45c90109463e.png">

- 애플리케이션 코어 관점에서 간단한 데이터 쿼리이다.
- 프로덕트 맥락에서는 유스케이스로 간주되지는 않기 때문에 실제 유스케이스와 구분이 되어야한다.
- 이러한 읽기 전용 유스케이스는 인커밍 전용 포트를 만들고 Query Service 에 구현하는 것이다.